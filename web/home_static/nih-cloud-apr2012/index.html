<html>
<head>
<style type="text/css">
	div.code {
	font-style: Courier;
	font-color: red; }
</style>

<title>2012 NIH Cloud Computing the Microbiome QIIME/IPython/StarCluster Demo: Supporting Data</title>

</head>

<body>
<h3>Instructions and supporting data for the QIIME/IPython/StarCluster demo at the <i>2012 NIH Cloud Computing the Microbiome</i> workshop.</h3>
<hr>
The analysis made use of the <a href="http://ipython.org/ipython-doc/stable/whatsnew/version0.12.html">IPython Notebook</a>, <a href="http://www.qiime.org">QIIME</a>, <a href="http://web.mit.edu/star/cluster/">StarCluster</a>, <a href="http://www.pycogent.org">PyCogent</a>, and <a href="http://pprospector.sourceforge.net/">PrimerProspector</a>. All of these tools are pre-installed in the <tt>ami-2faa7346</tt> public Amazon EC2 instance, which was used in this study.
<p>

<h4>Supporting Files</h4>
<hr>
The IPython notebooks supporting this study are available here:
<ul>
	<li><a href="NIHCloudDemo_Complete.html">NIH Cloud Demo (Complete)</a></li>
	<li><a href="NIHCloudDemo_Fast.html">NIH Cloud Demo (Fast)</a></li>
	<li><a href="Timing.html">Timing</a>*</li>
	<li><a href="VariableRegionPositionBoundaries.html">Variable Region Position Boundaries</a></li>
</ul>
* Note that the Timing notebook is for reference as related to the paper only - it will not be directly reproducible on re-runs of the above notebooks as it relies on the semi-manual creation of the <tt>tasks.log</tt> file. The <tt>tasks.log</tt> file used to generate the original timing data is available in <a href="pynb_files.zip">pynb_files.zip</a>.<p>
The Greengenes reference OTU collection used in this study is available for <a href="http://greengenes.lbl.gov/Download/Sequence_Data/Fasta_data_files/Caporaso_Reference_OTUs/gg_otus_4feb2011.tgz">download here</a>.
<p>
The IPython notebook files (<tt>.pynb</tt>) are available for <a href="pynb_files.zip">download here</a>.
<p>
The tree metadata mapping file used in generating the coloring categories in the 3D PCoA plot is <a href="./tree_metadata.txt">available here</a>.
<p>
A manuscript on this analysis is currently in review. When this is published we will make the Open Access article available from this page.
<h4>Reproducing the analysis</h4>
<hr>
Four <tt>m2.4xlarge</tt> instances were booted using StarCluster to create a 32 core cluster with approximately 280GB of RAM (70GB per 8 core instance). This was used for the full analysis (a more complete analysis then was done during the workshop, where the workshop analysis was optimized to run quickly).
<p>
To reproduce the analyses presented in this paper you should install StarCluster locally, and configure it according to the <a href="http://web.mit.edu/star/cluster/docs/latest/quickstart.html">instructions on the StarCluster website</a>. You can then add the following to your <tt>~/.starcluster/config</tt> file:
</p>
<tt>
[plugin ipcluster]<br>
setup_class = starcluster.plugins.ipcluster.IPCluster<br>
enable_notebook = true<br>
# If you leave notebook_passwd out, a random password <br>
# will be generated instead.<br>
notebook_passwd = YOUR-PASSWORD<p>

[cluster qiime]<br>
node_image_id = ami-2faa7346<br>
keyname = YOUR-KEY<br>
cluster_size = 4<br>
node_instance_type = m2.4xlarge<br>
plugins = ipcluster<br>
</tt>
<p>
You can then boot this cluster by running:
<p>
<tt>starcluster start -c qiime myqiime</tt>
<p>
You will be presented with the URL of your IPython notebook. You can upload our <tt><a href="pynb_files.zip">.pynb files</a></tt> to re-run the analysis directly on your own hardware, or tweak it to perform your own analysis.
<p>
Have fun!
	
</body>
</html> 